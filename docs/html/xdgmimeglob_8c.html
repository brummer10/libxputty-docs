<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libxputty: xputty/xdgmime/xdgmimeglob.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="xputty_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">libxputty<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5b6c6e548521d04fd9faa277a37a0ed8.html">xputty</a></li><li class="navelem"><a class="el" href="dir_c5240ef839e1f2777b9652ffee386f31.html">xdgmime</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">xdgmimeglob.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a href="xdgmimeglob_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structXdgGlobHashNode.html">XdgGlobHashNode</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structXdgGlobList.html">XdgGlobList</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structXdgGlobHash.html">XdgGlobHash</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMimeWeight.html">MimeWeight</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:afa508fcb5c5476359cdd2893be403d4c" id="r_afa508fcb5c5476359cdd2893be403d4c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structXdgGlobHashNode.html">XdgGlobHashNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#afa508fcb5c5476359cdd2893be403d4c">XdgGlobHashNode</a></td></tr>
<tr class="separator:afa508fcb5c5476359cdd2893be403d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd90bb29f6c0ec89237743bb1f29ff31" id="r_abd90bb29f6c0ec89237743bb1f29ff31"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structXdgGlobList.html">XdgGlobList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#abd90bb29f6c0ec89237743bb1f29ff31">XdgGlobList</a></td></tr>
<tr class="separator:abd90bb29f6c0ec89237743bb1f29ff31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a068f98bb3e6ffa7004f977800537cf8e" id="r_a068f98bb3e6ffa7004f977800537cf8e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#a068f98bb3e6ffa7004f977800537cf8e">_xdg_glob_hash_lookup_file_name</a> (<a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *glob_hash, const char *file_name, const char *mime_types[], int n_mime_types)</td></tr>
<tr class="separator:a068f98bb3e6ffa7004f977800537cf8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc64d1ed6c4afaa0c78ca47ec2a4e21d" id="r_abc64d1ed6c4afaa0c78ca47ec2a4e21d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#abc64d1ed6c4afaa0c78ca47ec2a4e21d">_xdg_glob_hash_new</a> (void)</td></tr>
<tr class="separator:abc64d1ed6c4afaa0c78ca47ec2a4e21d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85ce0d2677748ee7e92940f2dcc71c1" id="r_ae85ce0d2677748ee7e92940f2dcc71c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#ae85ce0d2677748ee7e92940f2dcc71c1">_xdg_glob_hash_free</a> (<a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *glob_hash)</td></tr>
<tr class="separator:ae85ce0d2677748ee7e92940f2dcc71c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4d26a7cac584a4b499f1baf1d8552d" id="r_a8b4d26a7cac584a4b499f1baf1d8552d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410">XdgGlobType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#a8b4d26a7cac584a4b499f1baf1d8552d">_xdg_glob_determine_type</a> (const char *glob)</td></tr>
<tr class="separator:a8b4d26a7cac584a4b499f1baf1d8552d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054063013b44c4aba623c2a6d5350a2c" id="r_a054063013b44c4aba623c2a6d5350a2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#a054063013b44c4aba623c2a6d5350a2c">_xdg_glob_hash_append_glob</a> (<a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *glob_hash, const char *glob, const char *mime_type, int weight, int case_sensitive)</td></tr>
<tr class="separator:a054063013b44c4aba623c2a6d5350a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a441e515f2233ed198b4a4dc86922e3" id="r_a3a441e515f2233ed198b4a4dc86922e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#a3a441e515f2233ed198b4a4dc86922e3">_xdg_glob_hash_dump</a> (<a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *glob_hash)</td></tr>
<tr class="separator:a3a441e515f2233ed198b4a4dc86922e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab8c50d0cbaca9a15ac655d51c9a35d" id="r_acab8c50d0cbaca9a15ac655d51c9a35d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdgmimeglob_8c.html#acab8c50d0cbaca9a15ac655d51c9a35d">_xdg_mime_glob_read_from_file</a> (<a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *glob_hash, const char *file_name, int version_two)</td></tr>
<tr class="separator:acab8c50d0cbaca9a15ac655d51c9a35d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="afa508fcb5c5476359cdd2893be403d4c" name="afa508fcb5c5476359cdd2893be403d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa508fcb5c5476359cdd2893be403d4c">&#9670;&#160;</a></span>XdgGlobHashNode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structXdgGlobHashNode.html">XdgGlobHashNode</a> <a class="el" href="structXdgGlobHashNode.html">XdgGlobHashNode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00048">48</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>

</div>
</div>
<a id="abd90bb29f6c0ec89237743bb1f29ff31" name="abd90bb29f6c0ec89237743bb1f29ff31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd90bb29f6c0ec89237743bb1f29ff31">&#9670;&#160;</a></span>XdgGlobList</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structXdgGlobList.html">XdgGlobList</a> <a class="el" href="structXdgGlobList.html">XdgGlobList</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00049">49</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8b4d26a7cac584a4b499f1baf1d8552d" name="a8b4d26a7cac584a4b499f1baf1d8552d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b4d26a7cac584a4b499f1baf1d8552d">&#9670;&#160;</a></span>_xdg_glob_determine_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410">XdgGlobType</a> _xdg_glob_determine_type </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>glob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00519">519</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  520</span>{</div>
<div class="line"><span class="lineno">  521</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *ptr;</div>
<div class="line"><span class="lineno">  522</span>  <span class="keywordtype">int</span> maybe_in_simple_glob = FALSE;</div>
<div class="line"><span class="lineno">  523</span>  <span class="keywordtype">int</span> first_char = TRUE;</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>  ptr = glob;</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>  <span class="keywordflow">while</span> (*ptr != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><span class="lineno">  528</span>    {</div>
<div class="line"><span class="lineno">  529</span>      <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;*&#39;</span> &amp;&amp; first_char)</div>
<div class="line"><span class="lineno">  530</span>    maybe_in_simple_glob = TRUE;</div>
<div class="line"><span class="lineno">  531</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;\\&#39;</span> || *ptr == <span class="charliteral">&#39;[&#39;</span> || *ptr == <span class="charliteral">&#39;?&#39;</span> || *ptr == <span class="charliteral">&#39;*&#39;</span>)</div>
<div class="line"><span class="lineno">  532</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410a95bf0f590428d84199d74e939dc0202f">XDG_GLOB_FULL</a>;</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>      first_char = FALSE;</div>
<div class="line"><span class="lineno">  535</span>      ptr = _xdg_utf8_next_char (ptr);</div>
<div class="line"><span class="lineno">  536</span>    }</div>
<div class="line"><span class="lineno">  537</span>  <span class="keywordflow">if</span> (maybe_in_simple_glob)</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410a787c4474d3d7e5490ccb074f76e1d6ae">XDG_GLOB_SIMPLE</a>;</div>
<div class="line"><span class="lineno">  539</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  540</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410ad58b64725cbc54cd129cefea8e3c9094">XDG_GLOB_LITERAL</a>;</div>
<div class="line"><span class="lineno">  541</span>}</div>
<div class="ttc" id="axdgmimeglob_8h_html_a86e87c54b31bff3b714c3071008f5410a787c4474d3d7e5490ccb074f76e1d6ae"><div class="ttname"><a href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410a787c4474d3d7e5490ccb074f76e1d6ae">XDG_GLOB_SIMPLE</a></div><div class="ttdeci">@ XDG_GLOB_SIMPLE</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8h_source.html#l00038">xdgmimeglob.h:38</a></div></div>
<div class="ttc" id="axdgmimeglob_8h_html_a86e87c54b31bff3b714c3071008f5410a95bf0f590428d84199d74e939dc0202f"><div class="ttname"><a href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410a95bf0f590428d84199d74e939dc0202f">XDG_GLOB_FULL</a></div><div class="ttdeci">@ XDG_GLOB_FULL</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8h_source.html#l00040">xdgmimeglob.h:39</a></div></div>
<div class="ttc" id="axdgmimeglob_8h_html_a86e87c54b31bff3b714c3071008f5410ad58b64725cbc54cd129cefea8e3c9094"><div class="ttname"><a href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410ad58b64725cbc54cd129cefea8e3c9094">XDG_GLOB_LITERAL</a></div><div class="ttdeci">@ XDG_GLOB_LITERAL</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8h_source.html#l00037">xdgmimeglob.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="xdgmimeglob_8h_source.html#l00039">XDG_GLOB_FULL</a>, <a class="el" href="xdgmimeglob_8h_source.html#l00037">XDG_GLOB_LITERAL</a>, and <a class="el" href="xdgmimeglob_8h_source.html#l00038">XDG_GLOB_SIMPLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="xdgmimeglob_8c_source.html#l00545">_xdg_glob_hash_append_glob()</a>.</p>

</div>
</div>
<a id="a054063013b44c4aba623c2a6d5350a2c" name="a054063013b44c4aba623c2a6d5350a2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a054063013b44c4aba623c2a6d5350a2c">&#9670;&#160;</a></span>_xdg_glob_hash_append_glob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _xdg_glob_hash_append_glob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *&#160;</td>
          <td class="paramname"><em>glob_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>glob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mime_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>weight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>case_sensitive</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00545">545</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  550</span>{</div>
<div class="line"><span class="lineno">  551</span>  <a class="code hl_enumeration" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410">XdgGlobType</a> type;</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>  assert (glob_hash != NULL);</div>
<div class="line"><span class="lineno">  554</span>  assert (glob != NULL);</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>  type = <a class="code hl_function" href="xdgmimeglob_8c.html#a8b4d26a7cac584a4b499f1baf1d8552d">_xdg_glob_determine_type</a> (glob);</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>  <span class="keywordflow">switch</span> (type)</div>
<div class="line"><span class="lineno">  559</span>    {</div>
<div class="line"><span class="lineno">  560</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410ad58b64725cbc54cd129cefea8e3c9094">XDG_GLOB_LITERAL</a>:</div>
<div class="line"><span class="lineno">  561</span>      glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a86c898d88e0feffa66a95306cf809879">literal_list</a> = _xdg_glob_list_append (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a86c898d88e0feffa66a95306cf809879">literal_list</a>, strdup (glob), strdup (mime_type), weight, case_sensitive);</div>
<div class="line"><span class="lineno">  562</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410a787c4474d3d7e5490ccb074f76e1d6ae">XDG_GLOB_SIMPLE</a>:</div>
<div class="line"><span class="lineno">  564</span>      glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#ab9d7d25eb1dd72340af12760ff3431db">simple_node</a> = _xdg_glob_hash_insert_text (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#ab9d7d25eb1dd72340af12760ff3431db">simple_node</a>, glob + 1, mime_type, weight, case_sensitive);</div>
<div class="line"><span class="lineno">  565</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  566</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410a95bf0f590428d84199d74e939dc0202f">XDG_GLOB_FULL</a>:</div>
<div class="line"><span class="lineno">  567</span>      glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a4942e4611196380fbe57af4ddaa56dc9">full_list</a> = _xdg_glob_list_append (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a4942e4611196380fbe57af4ddaa56dc9">full_list</a>, strdup (glob), strdup (mime_type), weight, case_sensitive);</div>
<div class="line"><span class="lineno">  568</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  569</span>    }</div>
<div class="line"><span class="lineno">  570</span>}</div>
<div class="ttc" id="astructXdgGlobHash_html_a4942e4611196380fbe57af4ddaa56dc9"><div class="ttname"><a href="structXdgGlobHash.html#a4942e4611196380fbe57af4ddaa56dc9">XdgGlobHash::full_list</a></div><div class="ttdeci">XdgGlobList * full_list</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00073">xdgmimeglob.c:73</a></div></div>
<div class="ttc" id="astructXdgGlobHash_html_a86c898d88e0feffa66a95306cf809879"><div class="ttname"><a href="structXdgGlobHash.html#a86c898d88e0feffa66a95306cf809879">XdgGlobHash::literal_list</a></div><div class="ttdeci">XdgGlobList * literal_list</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00071">xdgmimeglob.c:71</a></div></div>
<div class="ttc" id="astructXdgGlobHash_html_ab9d7d25eb1dd72340af12760ff3431db"><div class="ttname"><a href="structXdgGlobHash.html#ab9d7d25eb1dd72340af12760ff3431db">XdgGlobHash::simple_node</a></div><div class="ttdeci">XdgGlobHashNode * simple_node</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00072">xdgmimeglob.c:72</a></div></div>
<div class="ttc" id="axdgmimeglob_8c_html_a8b4d26a7cac584a4b499f1baf1d8552d"><div class="ttname"><a href="xdgmimeglob_8c.html#a8b4d26a7cac584a4b499f1baf1d8552d">_xdg_glob_determine_type</a></div><div class="ttdeci">XdgGlobType _xdg_glob_determine_type(const char *glob)</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00519">xdgmimeglob.c:519</a></div></div>
<div class="ttc" id="axdgmimeglob_8h_html_a86e87c54b31bff3b714c3071008f5410"><div class="ttname"><a href="xdgmimeglob_8h.html#a86e87c54b31bff3b714c3071008f5410">XdgGlobType</a></div><div class="ttdeci">XdgGlobType</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8h_source.html#l00035">xdgmimeglob.h:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="xdgmimeglob_8c_source.html#l00519">_xdg_glob_determine_type()</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00073">XdgGlobHash::full_list</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00071">XdgGlobHash::literal_list</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00072">XdgGlobHash::simple_node</a>, <a class="el" href="xdgmimeglob_8h_source.html#l00039">XDG_GLOB_FULL</a>, <a class="el" href="xdgmimeglob_8h_source.html#l00037">XDG_GLOB_LITERAL</a>, and <a class="el" href="xdgmimeglob_8h_source.html#l00038">XDG_GLOB_SIMPLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="xdgmimeglob_8c_source.html#l00610">_xdg_mime_glob_read_from_file()</a>.</p>

</div>
</div>
<a id="a3a441e515f2233ed198b4a4dc86922e3" name="a3a441e515f2233ed198b4a4dc86922e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a441e515f2233ed198b4a4dc86922e3">&#9670;&#160;</a></span>_xdg_glob_hash_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _xdg_glob_hash_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *&#160;</td>
          <td class="paramname"><em>glob_hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00573">573</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  574</span>{</div>
<div class="line"><span class="lineno">  575</span>  <a class="code hl_struct" href="structXdgGlobList.html">XdgGlobList</a> *list;</div>
<div class="line"><span class="lineno">  576</span>  printf (<span class="stringliteral">&quot;LITERAL STRINGS\n&quot;</span>);</div>
<div class="line"><span class="lineno">  577</span>  <span class="keywordflow">if</span> (!glob_hash || glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a86c898d88e0feffa66a95306cf809879">literal_list</a> == NULL)</div>
<div class="line"><span class="lineno">  578</span>    {</div>
<div class="line"><span class="lineno">  579</span>      printf (<span class="stringliteral">&quot;    None\n&quot;</span>);</div>
<div class="line"><span class="lineno">  580</span>    }</div>
<div class="line"><span class="lineno">  581</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  582</span>    {</div>
<div class="line"><span class="lineno">  583</span>      <span class="keywordflow">for</span> (list = glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a86c898d88e0feffa66a95306cf809879">literal_list</a>; list; list = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a3bcd45e89cc5111069c002d02e096684">next</a>)</div>
<div class="line"><span class="lineno">  584</span>    printf (<span class="stringliteral">&quot;    %s - %s %d\n&quot;</span>, (<span class="keywordtype">char</span> *)list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a12139285594e136f3f40ec07d2fdc5c5">mime_type</a>, list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#aa01147b1f07072d246c76dc85d69df7c">weight</a>);</div>
<div class="line"><span class="lineno">  585</span>    }</div>
<div class="line"><span class="lineno">  586</span>  printf (<span class="stringliteral">&quot;\nSIMPLE GLOBS\n&quot;</span>);</div>
<div class="line"><span class="lineno">  587</span>  <span class="keywordflow">if</span> (!glob_hash || glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#ab9d7d25eb1dd72340af12760ff3431db">simple_node</a> == NULL)</div>
<div class="line"><span class="lineno">  588</span>    {</div>
<div class="line"><span class="lineno">  589</span>      printf (<span class="stringliteral">&quot;    None\n&quot;</span>);</div>
<div class="line"><span class="lineno">  590</span>    }</div>
<div class="line"><span class="lineno">  591</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  592</span>    {</div>
<div class="line"><span class="lineno">  593</span>      _xdg_glob_hash_node_dump (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#ab9d7d25eb1dd72340af12760ff3431db">simple_node</a>, 4);</div>
<div class="line"><span class="lineno">  594</span>    }</div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>  printf (<span class="stringliteral">&quot;\nFULL GLOBS\n&quot;</span>);</div>
<div class="line"><span class="lineno">  597</span>  <span class="keywordflow">if</span> (!glob_hash || glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a4942e4611196380fbe57af4ddaa56dc9">full_list</a> == NULL)</div>
<div class="line"><span class="lineno">  598</span>    {</div>
<div class="line"><span class="lineno">  599</span>      printf (<span class="stringliteral">&quot;    None\n&quot;</span>);</div>
<div class="line"><span class="lineno">  600</span>    }</div>
<div class="line"><span class="lineno">  601</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  602</span>    {</div>
<div class="line"><span class="lineno">  603</span>      <span class="keywordflow">for</span> (list = glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a4942e4611196380fbe57af4ddaa56dc9">full_list</a>; list; list = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a3bcd45e89cc5111069c002d02e096684">next</a>)</div>
<div class="line"><span class="lineno">  604</span>    printf (<span class="stringliteral">&quot;    %s - %s %d\n&quot;</span>, (<span class="keywordtype">char</span> *)list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a12139285594e136f3f40ec07d2fdc5c5">mime_type</a>, list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#aa01147b1f07072d246c76dc85d69df7c">weight</a>);</div>
<div class="line"><span class="lineno">  605</span>    }</div>
<div class="line"><span class="lineno">  606</span>}</div>
<div class="ttc" id="astructXdgGlobList_html"><div class="ttname"><a href="structXdgGlobList.html">XdgGlobList</a></div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00060">xdgmimeglob.c:61</a></div></div>
<div class="ttc" id="astructXdgGlobList_html_a12139285594e136f3f40ec07d2fdc5c5"><div class="ttname"><a href="structXdgGlobList.html#a12139285594e136f3f40ec07d2fdc5c5">XdgGlobList::mime_type</a></div><div class="ttdeci">const char * mime_type</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00063">xdgmimeglob.c:63</a></div></div>
<div class="ttc" id="astructXdgGlobList_html_a3bcd45e89cc5111069c002d02e096684"><div class="ttname"><a href="structXdgGlobList.html#a3bcd45e89cc5111069c002d02e096684">XdgGlobList::next</a></div><div class="ttdeci">XdgGlobList * next</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00066">xdgmimeglob.c:66</a></div></div>
<div class="ttc" id="astructXdgGlobList_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="structXdgGlobList.html#a8f64897c7ccc5c13f276d1d07c4e7095">XdgGlobList::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00062">xdgmimeglob.c:62</a></div></div>
<div class="ttc" id="astructXdgGlobList_html_aa01147b1f07072d246c76dc85d69df7c"><div class="ttname"><a href="structXdgGlobList.html#aa01147b1f07072d246c76dc85d69df7c">XdgGlobList::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00064">xdgmimeglob.c:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="xdgmimeglob_8c_source.html#l00062">XdgGlobList::data</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00073">XdgGlobHash::full_list</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00071">XdgGlobHash::literal_list</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00063">XdgGlobList::mime_type</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00066">XdgGlobList::next</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00072">XdgGlobHash::simple_node</a>, and <a class="el" href="xdgmimeglob_8c_source.html#l00064">XdgGlobList::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="xdgmime_8c_source.html#l00857">xdg_mime_dump()</a>.</p>

</div>
</div>
<a id="ae85ce0d2677748ee7e92940f2dcc71c1" name="ae85ce0d2677748ee7e92940f2dcc71c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae85ce0d2677748ee7e92940f2dcc71c1">&#9670;&#160;</a></span>_xdg_glob_hash_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _xdg_glob_hash_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *&#160;</td>
          <td class="paramname"><em>glob_hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00510">510</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  511</span>{</div>
<div class="line"><span class="lineno">  512</span>  _xdg_glob_list_free (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a86c898d88e0feffa66a95306cf809879">literal_list</a>);</div>
<div class="line"><span class="lineno">  513</span>  _xdg_glob_list_free (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a4942e4611196380fbe57af4ddaa56dc9">full_list</a>);</div>
<div class="line"><span class="lineno">  514</span>  _xdg_glob_hash_free_nodes (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#ab9d7d25eb1dd72340af12760ff3431db">simple_node</a>);</div>
<div class="line"><span class="lineno">  515</span>  free (glob_hash);</div>
<div class="line"><span class="lineno">  516</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="xdgmimeglob_8c_source.html#l00073">XdgGlobHash::full_list</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00071">XdgGlobHash::literal_list</a>, and <a class="el" href="xdgmimeglob_8c_source.html#l00072">XdgGlobHash::simple_node</a>.</p>

<p class="reference">Referenced by <a class="el" href="xdgmime_8c_source.html#l00609">xdg_mime_shutdown()</a>.</p>

</div>
</div>
<a id="a068f98bb3e6ffa7004f977800537cf8e" name="a068f98bb3e6ffa7004f977800537cf8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a068f98bb3e6ffa7004f977800537cf8e">&#9670;&#160;</a></span>_xdg_glob_hash_lookup_file_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int _xdg_glob_hash_lookup_file_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *&#160;</td>
          <td class="paramname"><em>glob_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mime_types</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_mime_types</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00404">404</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  408</span>{</div>
<div class="line"><span class="lineno">  409</span>  <a class="code hl_struct" href="structXdgGlobList.html">XdgGlobList</a> *list;</div>
<div class="line"><span class="lineno">  410</span>  <span class="keywordtype">int</span> i, n;</div>
<div class="line"><span class="lineno">  411</span>  <a class="code hl_struct" href="structMimeWeight.html">MimeWeight</a> mimes[10];</div>
<div class="line"><span class="lineno">  412</span>  <span class="keywordtype">int</span> n_mimes = 10;</div>
<div class="line"><span class="lineno">  413</span>  <span class="keywordtype">int</span> len;</div>
<div class="line"><span class="lineno">  414</span>  <span class="keywordtype">char</span> *lower_case;</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>  <span class="comment">/* First, check the literals */</span></div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>  assert (file_name != NULL &amp;&amp; n_mime_types &gt; 0);</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>  n = 0;</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>  lower_case = ascii_tolower (file_name);</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>  <span class="keywordflow">for</span> (list = glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a86c898d88e0feffa66a95306cf809879">literal_list</a>; list; list = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a3bcd45e89cc5111069c002d02e096684">next</a>)</div>
<div class="line"><span class="lineno">  425</span>    {</div>
<div class="line"><span class="lineno">  426</span>      <span class="keywordflow">if</span> (strcmp ((<span class="keyword">const</span> <span class="keywordtype">char</span> *)list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, file_name) == 0)</div>
<div class="line"><span class="lineno">  427</span>    {</div>
<div class="line"><span class="lineno">  428</span>      mime_types[0] = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a12139285594e136f3f40ec07d2fdc5c5">mime_type</a>;</div>
<div class="line"><span class="lineno">  429</span>      free (lower_case);</div>
<div class="line"><span class="lineno">  430</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  431</span>    }</div>
<div class="line"><span class="lineno">  432</span>    }</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>  <span class="keywordflow">for</span> (list = glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a86c898d88e0feffa66a95306cf809879">literal_list</a>; list; list = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a3bcd45e89cc5111069c002d02e096684">next</a>)</div>
<div class="line"><span class="lineno">  435</span>    {</div>
<div class="line"><span class="lineno">  436</span>      <span class="keywordflow">if</span> (!list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a85cc8e014bc98ebe83a6c1bfcd796143">case_sensitive</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  437</span>      strcmp ((<span class="keyword">const</span> <span class="keywordtype">char</span> *)list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, lower_case) == 0)</div>
<div class="line"><span class="lineno">  438</span>    {</div>
<div class="line"><span class="lineno">  439</span>      mime_types[0] = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a12139285594e136f3f40ec07d2fdc5c5">mime_type</a>;</div>
<div class="line"><span class="lineno">  440</span>      free (lower_case);</div>
<div class="line"><span class="lineno">  441</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  442</span>    }</div>
<div class="line"><span class="lineno">  443</span>    }</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>  len = strlen (file_name);</div>
<div class="line"><span class="lineno">  447</span>  n = _xdg_glob_hash_node_lookup_file_name (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#ab9d7d25eb1dd72340af12760ff3431db">simple_node</a>, lower_case, len, FALSE,</div>
<div class="line"><span class="lineno">  448</span>                        mimes, n_mimes);</div>
<div class="line"><span class="lineno">  449</span>  <span class="keywordflow">if</span> (n == 0)</div>
<div class="line"><span class="lineno">  450</span>    n = _xdg_glob_hash_node_lookup_file_name (glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#ab9d7d25eb1dd72340af12760ff3431db">simple_node</a>, file_name, len, TRUE,</div>
<div class="line"><span class="lineno">  451</span>                          mimes, n_mimes);</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>  <span class="keywordflow">if</span> (n == 0)</div>
<div class="line"><span class="lineno">  454</span>    {</div>
<div class="line"><span class="lineno">  455</span>      <span class="keywordflow">for</span> (list = glob_hash-&gt;<a class="code hl_variable" href="structXdgGlobHash.html#a4942e4611196380fbe57af4ddaa56dc9">full_list</a>; list &amp;&amp; n &lt; n_mime_types; list = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a3bcd45e89cc5111069c002d02e096684">next</a>)</div>
<div class="line"><span class="lineno">  456</span>        {</div>
<div class="line"><span class="lineno">  457</span>          <span class="keywordflow">if</span> (fnmatch ((<span class="keyword">const</span> <span class="keywordtype">char</span> *)list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, file_name, 0) == 0)</div>
<div class="line"><span class="lineno">  458</span>        {</div>
<div class="line"><span class="lineno">  459</span>          mimes[n].<a class="code hl_variable" href="structMimeWeight.html#aa0501f812a7b62a6d08a76997f72e4c2">mime</a> = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#a12139285594e136f3f40ec07d2fdc5c5">mime_type</a>;</div>
<div class="line"><span class="lineno">  460</span>          mimes[n].<a class="code hl_variable" href="structMimeWeight.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = list-&gt;<a class="code hl_variable" href="structXdgGlobList.html#aa01147b1f07072d246c76dc85d69df7c">weight</a>;</div>
<div class="line"><span class="lineno">  461</span>          n++;</div>
<div class="line"><span class="lineno">  462</span>        }</div>
<div class="line"><span class="lineno">  463</span>        }</div>
<div class="line"><span class="lineno">  464</span>    }</div>
<div class="line"><span class="lineno">  465</span>  free (lower_case);</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>  qsort (mimes, n, <span class="keyword">sizeof</span> (<a class="code hl_struct" href="structMimeWeight.html">MimeWeight</a>), compare_mime_weight);</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>  <span class="keywordflow">if</span> (n_mime_types &lt; n)</div>
<div class="line"><span class="lineno">  470</span>    n = n_mime_types;</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>  <span class="keywordflow">for</span> (i = 0; i &lt; n; i++)</div>
<div class="line"><span class="lineno">  473</span>    mime_types[i] = mimes[i].mime;</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>  <span class="keywordflow">return</span> n;</div>
<div class="line"><span class="lineno">  476</span>}</div>
<div class="ttc" id="astructMimeWeight_html"><div class="ttname"><a href="structMimeWeight.html">MimeWeight</a></div><div class="ttdef"><b>Definition</b> <a href="xdgmimecache_8c_source.html#l00351">xdgmimecache.c:351</a></div></div>
<div class="ttc" id="astructMimeWeight_html_aa01147b1f07072d246c76dc85d69df7c"><div class="ttname"><a href="structMimeWeight.html#aa01147b1f07072d246c76dc85d69df7c">MimeWeight::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition</b> <a href="xdgmimecache_8c_source.html#l00353">xdgmimecache.c:353</a></div></div>
<div class="ttc" id="astructMimeWeight_html_aa0501f812a7b62a6d08a76997f72e4c2"><div class="ttname"><a href="structMimeWeight.html#aa0501f812a7b62a6d08a76997f72e4c2">MimeWeight::mime</a></div><div class="ttdeci">const char * mime</div><div class="ttdef"><b>Definition</b> <a href="xdgmimecache_8c_source.html#l00352">xdgmimecache.c:352</a></div></div>
<div class="ttc" id="astructXdgGlobList_html_a85cc8e014bc98ebe83a6c1bfcd796143"><div class="ttname"><a href="structXdgGlobList.html#a85cc8e014bc98ebe83a6c1bfcd796143">XdgGlobList::case_sensitive</a></div><div class="ttdeci">int case_sensitive</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00065">xdgmimeglob.c:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="xdgmimeglob_8c_source.html#l00065">XdgGlobList::case_sensitive</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00062">XdgGlobList::data</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00073">XdgGlobHash::full_list</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00071">XdgGlobHash::literal_list</a>, <a class="el" href="xdgmimecache_8c_source.html#l00352">MimeWeight::mime</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00063">XdgGlobList::mime_type</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00066">XdgGlobList::next</a>, <a class="el" href="xdgmimeglob_8c_source.html#l00072">XdgGlobHash::simple_node</a>, <a class="el" href="xdgmimecache_8c_source.html#l00353">MimeWeight::weight</a>, and <a class="el" href="xdgmimeglob_8c_source.html#l00064">XdgGlobList::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="xdgmime_8c_source.html#l00493">xdg_mime_get_mime_type_for_file()</a>, <a class="el" href="xdgmime_8c_source.html#l00572">xdg_mime_get_mime_type_from_file_name()</a>, and <a class="el" href="xdgmime_8c_source.html#l00588">xdg_mime_get_mime_types_from_file_name()</a>.</p>

</div>
</div>
<a id="abc64d1ed6c4afaa0c78ca47ec2a4e21d" name="abc64d1ed6c4afaa0c78ca47ec2a4e21d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc64d1ed6c4afaa0c78ca47ec2a4e21d">&#9670;&#160;</a></span>_xdg_glob_hash_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> * _xdg_glob_hash_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00484">484</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  485</span>{</div>
<div class="line"><span class="lineno">  486</span>  <a class="code hl_struct" href="structXdgGlobHash.html">XdgGlobHash</a> *glob_hash;</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>  glob_hash = calloc (1, <span class="keyword">sizeof</span> (<a class="code hl_struct" href="structXdgGlobHash.html">XdgGlobHash</a>));</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>  <span class="keywordflow">return</span> glob_hash;</div>
<div class="line"><span class="lineno">  491</span>}</div>
<div class="ttc" id="astructXdgGlobHash_html"><div class="ttname"><a href="structXdgGlobHash.html">XdgGlobHash</a></div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00069">xdgmimeglob.c:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acab8c50d0cbaca9a15ac655d51c9a35d" name="acab8c50d0cbaca9a15ac655d51c9a35d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acab8c50d0cbaca9a15ac655d51c9a35d">&#9670;&#160;</a></span>_xdg_mime_glob_read_from_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _xdg_mime_glob_read_from_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structXdgGlobHash.html">XdgGlobHash</a> *&#160;</td>
          <td class="paramname"><em>glob_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>version_two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xdgmimeglob_8c_source.html#l00610">610</a> of file <a class="el" href="xdgmimeglob_8c_source.html">xdgmimeglob.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  613</span>{</div>
<div class="line"><span class="lineno">  614</span>  FILE *glob_file;</div>
<div class="line"><span class="lineno">  615</span>  <span class="keywordtype">char</span> line[255];</div>
<div class="line"><span class="lineno">  616</span>  <span class="keywordtype">char</span> *p;</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>  glob_file = fopen (file_name, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>  <span class="keywordflow">if</span> (glob_file == NULL)</div>
<div class="line"><span class="lineno">  621</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>  <span class="comment">/* FIXME: Not UTF-8 safe.  Doesn&#39;t work if lines are greater than 255 chars.</span></div>
<div class="line"><span class="lineno">  624</span><span class="comment">   * Blah */</span></div>
<div class="line"><span class="lineno">  625</span>  <span class="keywordflow">while</span> (fgets (line, 255, glob_file) != NULL)</div>
<div class="line"><span class="lineno">  626</span>    {</div>
<div class="line"><span class="lineno">  627</span>      <span class="keywordtype">char</span> *colon;</div>
<div class="line"><span class="lineno">  628</span>      <span class="keywordtype">char</span> *mimetype, *glob, *end;</div>
<div class="line"><span class="lineno">  629</span>      <span class="keywordtype">int</span> weight;</div>
<div class="line"><span class="lineno">  630</span>      <span class="keywordtype">int</span> case_sensitive;</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>      <span class="keywordflow">if</span> (line[0] == <span class="charliteral">&#39;#&#39;</span> || line[0] == 0)</div>
<div class="line"><span class="lineno">  633</span>    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  634</span> </div>
<div class="line"><span class="lineno">  635</span>      end = line + strlen(line) - 1;</div>
<div class="line"><span class="lineno">  636</span>      <span class="keywordflow">if</span> (*end == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">  637</span>    *end = 0;</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>      p = line;</div>
<div class="line"><span class="lineno">  640</span>      <span class="keywordflow">if</span> (version_two)</div>
<div class="line"><span class="lineno">  641</span>    {</div>
<div class="line"><span class="lineno">  642</span>      colon = strchr (p, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><span class="lineno">  643</span>      <span class="keywordflow">if</span> (colon == NULL)</div>
<div class="line"><span class="lineno">  644</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  645</span>      *colon = 0;</div>
<div class="line"><span class="lineno">  646</span>          weight = atoi (p);</div>
<div class="line"><span class="lineno">  647</span>      p = colon + 1;</div>
<div class="line"><span class="lineno">  648</span>    }</div>
<div class="line"><span class="lineno">  649</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  650</span>    weight = 50;</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>      colon = strchr (p, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><span class="lineno">  653</span>      <span class="keywordflow">if</span> (colon == NULL)</div>
<div class="line"><span class="lineno">  654</span>    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  655</span>      *colon = 0;</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>      mimetype = p;</div>
<div class="line"><span class="lineno">  658</span>      p = colon + 1;</div>
<div class="line"><span class="lineno">  659</span>      glob = p;</div>
<div class="line"><span class="lineno">  660</span>      case_sensitive = FALSE;</div>
<div class="line"><span class="lineno">  661</span> </div>
<div class="line"><span class="lineno">  662</span>      colon = strchr (p, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><span class="lineno">  663</span>      <span class="keywordflow">if</span> (version_two &amp;&amp; colon != NULL)</div>
<div class="line"><span class="lineno">  664</span>    {</div>
<div class="line"><span class="lineno">  665</span>      <span class="keywordtype">char</span> *flag;</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>      <span class="comment">/* We got flags */</span></div>
<div class="line"><span class="lineno">  668</span>      *colon = 0;</div>
<div class="line"><span class="lineno">  669</span>      p = colon + 1;</div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>      <span class="comment">/* Flags end at next colon */</span></div>
<div class="line"><span class="lineno">  672</span>      colon = strchr (p, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><span class="lineno">  673</span>      <span class="keywordflow">if</span> (colon != NULL)</div>
<div class="line"><span class="lineno">  674</span>        *colon = 0;</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>      flag = strstr (p, <span class="stringliteral">&quot;cs&quot;</span>);</div>
<div class="line"><span class="lineno">  677</span>      <span class="keywordflow">if</span> (flag != NULL &amp;&amp;</div>
<div class="line"><span class="lineno">  678</span>          <span class="comment">/* Start or after comma */</span></div>
<div class="line"><span class="lineno">  679</span>          (flag == p ||</div>
<div class="line"><span class="lineno">  680</span>           flag[-1] == <span class="charliteral">&#39;,&#39;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  681</span>          <span class="comment">/* ends with comma or end of string */</span></div>
<div class="line"><span class="lineno">  682</span>          (flag[2] == 0 ||</div>
<div class="line"><span class="lineno">  683</span>           flag[2] == <span class="charliteral">&#39;,&#39;</span>))</div>
<div class="line"><span class="lineno">  684</span>        case_sensitive = TRUE;</div>
<div class="line"><span class="lineno">  685</span>    }</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>      <a class="code hl_function" href="xdgmimeglob_8c.html#a054063013b44c4aba623c2a6d5350a2c">_xdg_glob_hash_append_glob</a> (glob_hash, glob, mimetype, weight, case_sensitive);</div>
<div class="line"><span class="lineno">  688</span>    }</div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span>  fclose (glob_file);</div>
<div class="line"><span class="lineno">  691</span>}</div>
<div class="ttc" id="axdgmimeglob_8c_html_a054063013b44c4aba623c2a6d5350a2c"><div class="ttname"><a href="xdgmimeglob_8c.html#a054063013b44c4aba623c2a6d5350a2c">_xdg_glob_hash_append_glob</a></div><div class="ttdeci">void _xdg_glob_hash_append_glob(XdgGlobHash *glob_hash, const char *glob, const char *mime_type, int weight, int case_sensitive)</div><div class="ttdef"><b>Definition</b> <a href="xdgmimeglob_8c_source.html#l00545">xdgmimeglob.c:545</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="xdgmimeglob_8c_source.html#l00545">_xdg_glob_hash_append_glob()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
